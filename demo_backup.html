<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hola EspaÃ±ol - 5ë¶„ ìŠ¤í˜ì¸ì–´</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            color: #333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        header {
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .header-content {
            padding: 1rem;
            text-align: center;
        }
        
        .header-content h1 {
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
        }
        
        .header-content p {
            color: #666;
            font-size: 0.9rem;
        }
        
        .nav-menu {
            display: flex;
            border-top: 1px solid #e0e0e0;
        }
        
        .nav-item {
            flex: 1;
            padding: 0.75rem;
            text-align: center;
            background: white;
            border: none;
            border-right: 1px solid #e0e0e0;
            cursor: pointer;
            font-size: 0.9rem;
            color: #666;
            transition: all 0.2s;
        }
        
        .nav-item:last-child {
            border-right: none;
        }
        
        .nav-item:hover {
            background: #f5f5f5;
        }
        
        .nav-item.active {
            background: #3b82f6;
            color: white;
            font-weight: bold;
        }
        
        main {
            flex: 1;
            padding: 1rem;
            max-width: 400px;
            margin: 0 auto;
            width: 100%;
        }
        
        .progress-bar {
            background: white;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .progress-track {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            background: #3b82f6;
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .practice-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }
        
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
            gap: 1rem;
        }
        
        .nav-btn {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            color: #666;
            transition: all 0.2s;
        }
        
        .nav-btn:hover:not(:disabled) {
            border-color: #3b82f6;
            color: #3b82f6;
            background: #f5f9ff;
        }
        
        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        
        .nav-btn.next {
            flex-direction: row-reverse;
        }
        
        .prompt {
            background: #e3f2fd;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
            text-align: center;
        }
        
        .translation {
            text-align: center;
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            min-height: 1.5rem;
        }
        
        .translation-toggle {
            text-align: center;
            margin-bottom: 1rem;
        }
        
        .translation-btn {
            background: #f0f0f0;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            color: #666;
        }
        
        .translation-btn:hover {
            background: #e0e0e0;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
            text-align: left;
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .option-text {
            flex: 1;
        }
        
        .option-translation-toggle {
            padding: 0.3rem 0.6rem;
            background: #f0f0f0;
            border-radius: 15px;
            font-size: 0.8rem;
            cursor: pointer;
            margin-left: 0.5rem;
        }
        
        .option-btn:hover {
            border-color: #3b82f6;
            background: #f5f9ff;
        }
        
        .option-btn.correct {
            border-color: #10b981;
            background: #d1fae5;
        }
        
        .option-btn.incorrect {
            border-color: #ef4444;
            background: #fee2e2;
        }
        
        .option-btn.disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .option-translation {
            font-size: 0.85rem;
            color: #666;
            margin-top: 0.3rem;
            display: none;
        }
        
        .option-translation.show {
            display: block;
        }
        
        .feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            display: none;
        }
        
        .feedback.show {
            display: block;
        }
        
        .feedback.correct {
            background: #d1fae5;
            color: #065f46;
        }
        
        .feedback.incorrect {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .streak {
            text-align: center;
            font-size: 0.9rem;
            color: #f97316;
            margin-top: 0.5rem;
        }
        
        .explanation {
            margin-top: 0.5rem;
            font-size: 0.85rem;
            color: #666;
        }
        
        .verb-tense-card {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        
        .verb-info {
            text-align: center;
            margin-bottom: 1rem;
        }
        
        .verb-info h3 {
            color: #3b82f6;
            margin-bottom: 0.3rem;
        }
        
        .verb-info p {
            color: #666;
            font-size: 0.9rem;
        }
        
        .conjugation-grid {
            display: grid;
            gap: 0.5rem;
        }
        
        .conjugation-item {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 0.5rem;
            align-items: center;
        }
        
        .subject {
            font-weight: bold;
            color: #666;
            text-align: right;
            font-size: 0.9rem;
        }
        
        .conjugation-input {
            padding: 0.5rem;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .conjugation-input.correct {
            border-color: #10b981;
            background: #d1fae5;
        }
        
        .conjugation-input.incorrect {
            border-color: #ef4444;
            background: #fee2e2;
        }
        
        .check-btn {
            width: 100%;
            padding: 1rem;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 1rem;
        }
        
        .check-btn:hover {
            background: #2563eb;
        }
        
        .check-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        
        /* í™”ì‚´í‘œ ì•„ì´ì½˜ */
        .arrow-left::before {
            content: "â†";
            font-size: 1.2rem;
        }
        
        .arrow-right::after {
            content: "â†’";
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Hola EspaÃ±ol ğŸ‡ªğŸ‡¸</h1>
            <p>ë§¤ì¼ 5ë¶„ ìŠ¤í˜ì¸ì–´ ì—°ìŠµ</p>
        </div>
        <nav class="nav-menu">
            <button class="nav-item active" onclick="switchMode('conversation')">íšŒí™”</button>
            <button class="nav-item" onclick="switchMode('verbs')">ë™ì‚¬ ì‹œì œ</button>
            <button class="nav-item" onclick="switchMode('grammar')">ë¬¸ë²•</button>
            <button class="nav-item" onclick="switchMode('vocabulary')">ë‹¨ì–´</button>
        </nav>
    </header>
    
    <main>
        <div class="progress-bar">
            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                <span id="mode-title">íšŒí™” ì—°ìŠµ</span>
                <span id="progress-text">1/10</span>
            </div>
            <div class="progress-track">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="streak">ğŸ”¥ 7ì¼ ì—°ì† í•™ìŠµ ì¤‘!</div>
        </div>
        
        <div id="conversation-mode">
            <div class="practice-card">
                <div class="prompt" id="prompt">
                    Â¡Hola! Â¿CÃ³mo estÃ¡s?
                </div>
                
                <div class="translation" id="main-translation"></div>
                
                <div class="translation-toggle">
                    <button class="translation-btn" onclick="toggleTranslation()">
                        ğŸ” ëœ» ë³´ê¸°
                    </button>
                </div>
                
                <div class="options" id="options">
                    <!-- ì˜µì…˜ë“¤ì´ ì—¬ê¸° ë“¤ì–´ê°‘ë‹ˆë‹¤ -->
                </div>
                
                <div class="feedback" id="feedback">
                    <!-- í”¼ë“œë°±ì´ ì—¬ê¸° í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
                
                <div class="navigation-buttons">
                    <button class="nav-btn prev arrow-left" onclick="navigatePractice(-1)" id="prev-btn">
                        ì´ì „
                    </button>
                    <button class="nav-btn next arrow-right" onclick="navigatePractice(1)" id="next-btn">
                        ë‹¤ìŒ
                    </button>
                </div>
            </div>
        </div>
        
        <div id="verb-mode" style="display: none;">
            <div class="practice-card">
                <div class="verb-tense-card">
                    <div class="verb-info">
                        <h3 id="verb-infinitive">hablar</h3>
                        <p id="verb-meaning">ë§í•˜ë‹¤</p>
                        <p id="tense-name">í˜„ì¬ ì‹œì œ (Presente)</p>
                    </div>
                    
                    <div class="conjugation-grid" id="conjugation-grid">
                        <!-- ë™ì‚¬ í™œìš© ì…ë ¥ í•„ë“œë“¤ì´ ì—¬ê¸° ë“¤ì–´ê°‘ë‹ˆë‹¤ -->
                    </div>
                    
                    <button class="check-btn" onclick="checkConjugations()" id="check-btn">í™•ì¸í•˜ê¸°</button>
                </div>
                
                <div class="navigation-buttons">
                    <button class="nav-btn prev arrow-left" onclick="navigateVerb(-1)" id="verb-prev-btn">
                        ì´ì „
                    </button>
                    <button class="nav-btn next arrow-right" onclick="navigateVerb(1)" id="verb-next-btn">
                        ë‹¤ìŒ
                    </button>
                </div>
            </div>
        </div>
        
        <div id="grammar-mode" style="display: none;">
            <div class="practice-card">
                <div class="grammar-section-selector" style="text-align: center; margin-bottom: 1rem;">
                    <button class="grammar-type-btn active" onclick="switchGrammarType('ser-estar')">Ser vs Estar</button>
                    <button class="grammar-type-btn" onclick="switchGrammarType('articles')">ê´€ì‚¬</button>
                    <button class="grammar-type-btn" onclick="switchGrammarType('pronouns')">ëŒ€ëª…ì‚¬</button>
                </div>
                <div id="grammar-content">
                    <!-- ë¬¸ë²• ë‚´ìš©ì´ ì—¬ê¸° ë“¤ì–´ê°‘ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
        
        <div id="vocabulary-mode" style="display: none;">
            <div class="practice-card">
                <div class="vocab-topic-selector" style="text-align: center; margin-bottom: 1rem;">
                    <select id="vocab-topic" onchange="loadVocabularyTopic()" style="padding: 0.5rem; font-size: 1rem; border-radius: 5px;">
                        <option value="greetings">ì¸ì‚¬ì™€ ê¸°ë³¸ í‘œí˜„</option>
                        <option value="family">ê°€ì¡±</option>
                        <option value="food">ìŒì‹</option>
                        <option value="numbers">ìˆ«ì</option>
                        <option value="colors">ìƒ‰ê¹”</option>
                        <option value="time">ì‹œê°„</option>
                        <option value="body">ì‹ ì²´</option>
                    </select>
                </div>
                <div id="vocab-content">
                    <!-- ë‹¨ì–´ ë‚´ìš©ì´ ì—¬ê¸° ë“¤ì–´ê°‘ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
    </main>
    
    <script>
        let currentMode = 'conversation';
        let currentIndex = 0;
        let currentVerbIndex = 0;
        let showingTranslation = false;
        let optionTranslations = {};
        let hasAnswered = false;
        let verbChecked = false;
        
        // íšŒí™” ì—°ìŠµ ë°ì´í„°
        const practices = [
            {
                prompt: "Â¡Hola! Â¿CÃ³mo estÃ¡s?",
                translation: "ì•ˆë…•! ì–´ë–»ê²Œ ì§€ë‚´?",
                options: [
                    { text: "Muy bien, gracias. Â¿Y tÃº?", translation: "ì•„ì£¼ ì˜ ì§€ë‚´, ê³ ë§ˆì›Œ. ë„ˆëŠ”?", correct: true },
                    { text: "Soy estudiante.", translation: "ë‚˜ëŠ” í•™ìƒì´ì•¼.", correct: false, explanation: "'Â¿CÃ³mo estÃ¡s?'ëŠ” ì•ˆë¶€ë¥¼ ë¬»ëŠ” ì§ˆë¬¸ì´ì—ìš”. 'Soy estudiante'ëŠ” ì§ì—…ì„ ë§í•  ë•Œ ì¨ìš”." },
                    { text: "Me llamo Juan.", translation: "ë‚´ ì´ë¦„ì€ í›„ì•ˆì´ì•¼.", correct: false, explanation: "ì´ë¦„ì„ ë§í•˜ëŠ” í‘œí˜„ì´ì—ìš”. ì•ˆë¶€ ì¸ì‚¬ì—ëŠ” ë§ì§€ ì•Šì•„ìš”." }
                ]
            },
            {
                prompt: "Â¿CÃ³mo te llamas?",
                translation: "ì´ë¦„ì´ ë­ì•¼?",
                options: [
                    { text: "Estoy bien.", translation: "ì˜ ì§€ë‚´.", correct: false, explanation: "ì•ˆë¶€ë¥¼ ëŒ€ë‹µí•˜ëŠ” í‘œí˜„ì´ì—ìš”. ì´ë¦„ì„ ë¬»ëŠ” ì§ˆë¬¸ì—ëŠ” 'Me llamo...'ë¡œ ë‹µí•´ìš”." },
                    { text: "Me llamo MarÃ­a.", translation: "ë‚´ ì´ë¦„ì€ ë§ˆë¦¬ì•„ì•¼.", correct: true },
                    { text: "Tengo 20 aÃ±os.", translation: "ë‚˜ëŠ” 20ì‚´ì´ì•¼.", correct: false, explanation: "ë‚˜ì´ë¥¼ ë§í•˜ëŠ” í‘œí˜„ì´ì—ìš”. ì´ë¦„ì„ ë¬¼ì—ˆì„ ë•ŒëŠ” ì‚¬ìš©í•˜ì§€ ì•Šì•„ìš”." }
                ]
            },
            {
                prompt: "Â¿De dÃ³nde eres?",
                translation: "ì–´ë””ì„œ ì™”ì–´?",
                options: [
                    { text: "Soy de Corea.", translation: "ë‚˜ëŠ” í•œêµ­ì—ì„œ ì™”ì–´.", correct: true },
                    { text: "Estoy en casa.", translation: "ë‚˜ëŠ” ì§‘ì— ìˆì–´.", correct: false, explanation: "'Estar'ëŠ” ìœ„ì¹˜ë¥¼ ë‚˜íƒ€ë‚´ìš”. ì¶œì‹ ì„ ë§í•  ë•ŒëŠ” 'Ser de...'ë¥¼ ì¨ìš”." },
                    { text: "Voy a la escuela.", translation: "ë‚˜ëŠ” í•™êµì— ê°€.", correct: false, explanation: "ê°€ëŠ” ê³³ì„ ë§í•˜ëŠ” í‘œí˜„ì´ì—ìš”. ì¶œì‹ ì§€ë¥¼ ë¬¼ì—ˆì„ ë•ŒëŠ” ì‚¬ìš©í•˜ì§€ ì•Šì•„ìš”." }
                ]
            },
            {
                prompt: "Â¿QuÃ© desea tomar?",
                translation: "ë¬´ì—‡ì„ ë“œì‹œê² ì–´ìš”?",
                options: [
                    { text: "Un cafÃ©, por favor.", translation: "ì»¤í”¼ í•˜ë‚˜ ì£¼ì„¸ìš”.", correct: true },
                    { text: "Soy coreano.", translation: "ì €ëŠ” í•œêµ­ì¸ì…ë‹ˆë‹¤.", correct: false, explanation: "ìŒë£Œ ì£¼ë¬¸ê³¼ ê´€ê³„ì—†ëŠ” ëŒ€ë‹µì´ì—ìš”." },
                    { text: "EstÃ¡ bien.", translation: "ê´œì°®ì•„ìš”.", correct: false, explanation: "ì£¼ë¬¸í•  ë•ŒëŠ” ì›í•˜ëŠ” ê²ƒì„ êµ¬ì²´ì ìœ¼ë¡œ ë§í•´ì•¼ í•´ìš”." }
                ]
            },
            {
                prompt: "Â¿CuÃ¡nto cuesta?",
                translation: "ì–¼ë§ˆì˜ˆìš”?",
                options: [
                    { text: "Me gusta mucho.", translation: "ì •ë§ ì¢‹ì•„í•´ìš”.", correct: false, explanation: "ê°€ê²©ì„ ë¬¼ì—ˆì„ ë•ŒëŠ” ìˆ«ìë¡œ ë‹µí•´ì•¼ í•´ìš”." },
                    { text: "Son diez euros.", translation: "10ìœ ë¡œì…ë‹ˆë‹¤.", correct: true },
                    { text: "EstÃ¡ cerca.", translation: "ê°€ê¹Œì›Œìš”.", correct: false, explanation: "ê±°ë¦¬ë¥¼ ë‚˜íƒ€ë‚´ëŠ” í‘œí˜„ì´ì—ìš”. ê°€ê²©ê³¼ëŠ” ê´€ê³„ì—†ì–´ìš”." }
                ]
            },
            {
                prompt: "Â¿Hablas espaÃ±ol?",
                translation: "ìŠ¤í˜ì¸ì–´ í•  ì¤„ ì•Œì•„?",
                options: [
                    { text: "Un poco.", translation: "ì¡°ê¸ˆ.", correct: true },
                    { text: "Tengo hambre.", translation: "ë°°ê³ íŒŒ.", correct: false, explanation: "ì–¸ì–´ ëŠ¥ë ¥ê³¼ ê´€ê³„ì—†ëŠ” ëŒ€ë‹µì´ì—ìš”." },
                    { text: "Es bonito.", translation: "ì˜ˆë».", correct: false, explanation: "ë¬´ì–¸ê°€ë¥¼ í‰ê°€í•˜ëŠ” í‘œí˜„ì´ì—ìš”. ì–¸ì–´ ëŠ¥ë ¥ì„ ë¬¼ì—ˆì„ ë•ŒëŠ” ì‚¬ìš©í•˜ì§€ ì•Šì•„ìš”." }
                ]
            },
            {
                prompt: "Â¿QuÃ© hora es?",
                translation: "ëª‡ ì‹œì•¼?",
                options: [
                    { text: "Hace calor.", translation: "ë‚ ì”¨ê°€ ë”ì›Œ.", correct: false, explanation: "ë‚ ì”¨ë¥¼ ë§í•˜ëŠ” í‘œí˜„ì´ì—ìš”. ì‹œê°„ì„ ë¬¼ì—ˆì„ ë•ŒëŠ” 'Son las...'ë¡œ ë‹µí•´ìš”." },
                    { text: "Son las tres.", translation: "3ì‹œì•¼.", correct: true },
                    { text: "Vivo aquÃ­.", translation: "ì—¬ê¸° ì‚´ì•„.", correct: false, explanation: "ê±°ì£¼ì§€ë¥¼ ë§í•˜ëŠ” í‘œí˜„ì´ì—ìš”. ì‹œê°„ê³¼ëŠ” ê´€ê³„ì—†ì–´ìš”." }
                ]
            },
            {
                prompt: "Â¿DÃ³nde estÃ¡ el baÃ±o?",
                translation: "í™”ì¥ì‹¤ì´ ì–´ë””ì˜ˆìš”?",
                options: [
                    { text: "Me gusta.", translation: "ì¢‹ì•„í•´ìš”.", correct: false, explanation: "ìœ„ì¹˜ë¥¼ ë¬¼ì—ˆì„ ë•ŒëŠ” ì¥ì†Œë¥¼ ì•Œë ¤ì¤˜ì•¼ í•´ìš”." },
                    { text: "EstÃ¡ al fondo.", translation: "ì•ˆìª½ì— ìˆì–´ìš”.", correct: true },
                    { text: "Tengo sed.", translation: "ëª©ë§ë¼ìš”.", correct: false, explanation: "ìœ„ì¹˜ ì§ˆë¬¸ê³¼ ê´€ê³„ì—†ëŠ” ëŒ€ë‹µì´ì—ìš”." }
                ]
            },
            {
                prompt: "Gracias.",
                translation: "ê³ ë§ˆì›Œ.",
                options: [
                    { text: "De nada.", translation: "ì²œë§Œì—.", correct: true },
                    { text: "Buenos dÃ­as.", translation: "ì¢‹ì€ ì•„ì¹¨.", correct: false, explanation: "ê°ì‚¬ ì¸ì‚¬ì—ëŠ” 'De nada'ë‚˜ 'No hay de quÃ©'ë¡œ ë‹µí•´ìš”." },
                    { text: "Hasta luego.", translation: "ë‚˜ì¤‘ì— ë´.", correct: false, explanation: "ì‘ë³„ ì¸ì‚¬ì˜ˆìš”. ê°ì‚¬ ì¸ì‚¬ì— ëŒ€í•œ ë‹µì´ ì•„ë‹ˆì—ìš”." }
                ]
            },
            {
                prompt: "Â¿Tienes hermanos?",
                translation: "í˜•ì œìë§¤ê°€ ìˆì–´?",
                options: [
                    { text: "SÃ­, tengo dos hermanas.", translation: "ì‘, ì—¬ë™ìƒì´ ë‘˜ ìˆì–´.", correct: true },
                    { text: "Estoy cansado.", translation: "í”¼ê³¤í•´.", correct: false, explanation: "ê°€ì¡±ì— ëŒ€í•œ ì§ˆë¬¸ê³¼ ê´€ê³„ì—†ëŠ” ëŒ€ë‹µì´ì—ìš”." },
                    { text: "Es lunes.", translation: "ì›”ìš”ì¼ì´ì•¼.", correct: false, explanation: "ìš”ì¼ì„ ë§í•˜ëŠ” í‘œí˜„ì´ì—ìš”. ê°€ì¡± ê´€ê³„ë¥¼ ë¬¼ì—ˆì„ ë•ŒëŠ” ì‚¬ìš©í•˜ì§€ ì•Šì•„ìš”." }
                ]
            }
        ];
        
        // ë™ì‚¬ ì‹œì œ ì—°ìŠµ ë°ì´í„°
        const verbPractices = [
            {
                infinitive: "hablar",
                meaning: "ë§í•˜ë‹¤",
                type: "ar",
                tense: "presente",
                tenseName: "í˜„ì¬ ì‹œì œ (Presente)",
                conjugations: {
                    "yo": "hablo",
                    "tÃº": "hablas",
                    "Ã©l/ella": "habla",
                    "nosotros": "hablamos",
                    "vosotros": "hablÃ¡is",
                    "ellos": "hablan"
                }
            },
            {
                infinitive: "comer",
                meaning: "ë¨¹ë‹¤",
                type: "er",
                tense: "presente",
                tenseName: "í˜„ì¬ ì‹œì œ (Presente)",
                conjugations: {
                    "yo": "como",
                    "tÃº": "comes",
                    "Ã©l/ella": "come",
                    "nosotros": "comemos",
                    "vosotros": "comÃ©is",
                    "ellos": "comen"
                }
            },
            {
                infinitive: "vivir",
                meaning: "ì‚´ë‹¤",
                type: "ir",
                tense: "presente",
                tenseName: "í˜„ì¬ ì‹œì œ (Presente)",
                conjugations: {
                    "yo": "vivo",
                    "tÃº": "vives",
                    "Ã©l/ella": "vive",
                    "nosotros": "vivimos",
                    "vosotros": "vivÃ­s",
                    "ellos": "viven"
                }
            },
            {
                infinitive: "hablar",
                meaning: "ë§í•˜ë‹¤",
                type: "ar",
                tense: "preterito",
                tenseName: "ë‹¨ìˆœê³¼ê±° (PretÃ©rito)",
                conjugations: {
                    "yo": "hablÃ©",
                    "tÃº": "hablaste",
                    "Ã©l/ella": "hablÃ³",
                    "nosotros": "hablamos",
                    "vosotros": "hablasteis",
                    "ellos": "hablaron"
                }
            },
            {
                infinitive: "ser",
                meaning: "ì´ë‹¤ (ë³¸ì§ˆ)",
                type: "irregular",
                tense: "presente",
                tenseName: "í˜„ì¬ ì‹œì œ (Presente)",
                conjugations: {
                    "yo": "soy",
                    "tÃº": "eres",
                    "Ã©l/ella": "es",
                    "nosotros": "somos",
                    "vosotros": "sois",
                    "ellos": "son"
                }
            },
            {
                infinitive: "estar",
                meaning: "ì´ë‹¤ (ìƒíƒœ/ìœ„ì¹˜)",
                type: "irregular",
                tense: "presente",
                tenseName: "í˜„ì¬ ì‹œì œ (Presente)",
                conjugations: {
                    "yo": "estoy",
                    "tÃº": "estÃ¡s",
                    "Ã©l/ella": "estÃ¡",
                    "nosotros": "estamos",
                    "vosotros": "estÃ¡is",
                    "ellos": "estÃ¡n"
                }
            },
            {
                infinitive: "tener",
                meaning: "ê°€ì§€ë‹¤",
                type: "irregular",
                tense: "presente",
                tenseName: "í˜„ì¬ ì‹œì œ (Presente)",
                conjugations: {
                    "yo": "tengo",
                    "tÃº": "tienes",
                    "Ã©l/ella": "tiene",
                    "nosotros": "tenemos",
                    "vosotros": "tenÃ©is",
                    "ellos": "tienen"
                }
            },
            {
                infinitive: "poder",
                meaning: "í•  ìˆ˜ ìˆë‹¤",
                type: "irregular",
                tense: "presente",
                tenseName: "í˜„ì¬ ì‹œì œ (Presente)",
                conjugations: {
                    "yo": "puedo",
                    "tÃº": "puedes",
                    "Ã©l/ella": "puede",
                    "nosotros": "podemos",
                    "vosotros": "podÃ©is",
                    "ellos": "pueden"
                }
            },
            {
                infinitive: "comer",
                meaning: "ë¨¹ë‹¤",
                type: "er",
                tense: "preterito",
                tenseName: "ë‹¨ìˆœê³¼ê±° (PretÃ©rito)",
                conjugations: {
                    "yo": "comÃ­",
                    "tÃº": "comiste",
                    "Ã©l/ella": "comiÃ³",
                    "nosotros": "comimos",
                    "vosotros": "comisteis",
                    "ellos": "comieron"
                }
            },
            {
                infinitive: "hablar",
                meaning: "ë§í•˜ë‹¤",
                type: "ar",
                tense: "imperfecto",
                tenseName: "ë¶ˆì™„ë£Œê³¼ê±° (Imperfecto)",
                conjugations: {
                    "yo": "hablaba",
                    "tÃº": "hablabas",
                    "Ã©l/ella": "hablaba",
                    "nosotros": "hablÃ¡bamos",
                    "vosotros": "hablabais",
                    "ellos": "hablaban"
                }
            }
        ];
        
        const modeTitles = {
            conversation: "íšŒí™” ì—°ìŠµ",
            verbs: "ë™ì‚¬ ì‹œì œ ì—°ìŠµ",
            grammar: "ë¬¸ë²• ì—°ìŠµ",
            vocabulary: "ë‹¨ì–´ í•™ìŠµ"
        };
        
        function switchMode(mode) {
            currentMode = mode;
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            event.target.classList.add('active');
            
            // ëª¨ë“  ëª¨ë“œ ìˆ¨ê¸°ê¸°
            document.getElementById('conversation-mode').style.display = 'none';
            document.getElementById('verb-mode').style.display = 'none';
            document.getElementById('grammar-mode').style.display = 'none';
            document.getElementById('vocabulary-mode').style.display = 'none';
            
            // ì„ íƒëœ ëª¨ë“œ ë³´ì—¬ì£¼ê¸°
            document.getElementById(`${mode}-mode`).style.display = 'block';
            
            // ëª¨ë“œ ì œëª© ì—…ë°ì´íŠ¸
            document.getElementById('mode-title').textContent = modeTitles[mode];
            
            // ì¸ë±ìŠ¤ ì´ˆê¸°í™”
            if (mode === 'conversation') {
                currentIndex = 0;
                showPractice(currentIndex);
            } else if (mode === 'verbs') {
                currentVerbIndex = 0;
                showVerbPractice(currentVerbIndex);
            }
            
            updateProgress();
        }
        
        function updateProgress() {
            let current, total;
            
            if (currentMode === 'conversation') {
                current = currentIndex + 1;
                total = practices.length;
            } else if (currentMode === 'verbs') {
                current = currentVerbIndex + 1;
                total = verbPractices.length;
            } else {
                current = 0;
                total = 10;
            }
            
            const percentage = ((current - 1) / total) * 100;
            document.getElementById('progress-fill').style.width = percentage + '%';
            document.getElementById('progress-text').textContent = `${current}/${total}`;
        }
        
        function toggleTranslation() {
            showingTranslation = !showingTranslation;
            const mainTranslation = document.getElementById('main-translation');
            const optionTranslations = document.querySelectorAll('.option-translation');
            
            if (showingTranslation) {
                mainTranslation.textContent = practices[currentIndex].translation;
                optionTranslations.forEach(el => el.classList.add('show'));
                document.querySelector('.translation-btn').textContent = 'ğŸ™ˆ ëœ» ìˆ¨ê¸°ê¸°';
            } else {
                mainTranslation.textContent = '';
                optionTranslations.forEach(el => el.classList.remove('show'));
                document.querySelector('.translation-btn').textContent = 'ğŸ” ëœ» ë³´ê¸°';
            }
        }
        
        function toggleOptionTranslation(index) {
            const translationEl = document.getElementById(`translation-${index}`);
            const toggleBtn = event.target;
            
            if (optionTranslations[index]) {
                optionTranslations[index] = false;
                translationEl.classList.remove('show');
                toggleBtn.textContent = 'ëœ»';
            } else {
                optionTranslations[index] = true;
                translationEl.classList.add('show');
                toggleBtn.textContent = 'ìˆ¨ê¸°ê¸°';
            }
        }
        
        function selectOption(index) {
            if (hasAnswered) return;
            
            const practice = practices[currentIndex];
            const selectedOption = practice.options[index];
            const buttons = document.querySelectorAll('.option-btn');
            
            hasAnswered = true;
            
            // ëª¨ë“  ë²„íŠ¼ ë¹„í™œì„±í™”
            buttons.forEach(btn => {
                btn.disabled = true;
                btn.classList.add('disabled');
            });
            
            // ì •ë‹µ/ì˜¤ë‹µ í‘œì‹œ
            buttons.forEach((btn, i) => {
                if (practice.options[i].correct) {
                    btn.classList.add('correct');
                } else if (i === index && !selectedOption.correct) {
                    btn.classList.add('incorrect');
                }
            });
            
            // í”¼ë“œë°± í‘œì‹œ
            const feedback = document.getElementById('feedback');
            if (selectedOption.correct) {
                feedback.className = 'feedback show correct';
                feedback.innerHTML = `
                    <div>Â¡Muy bien! ì •ë‹µì´ì—ìš”! ğŸ‘</div>
                `;
            } else {
                feedback.className = 'feedback show incorrect';
                feedback.innerHTML = `
                    <div>ì•„ì‰¬ì›Œìš”! ë‹¤ì‹œ í•œ ë²ˆ ìƒê°í•´ë³´ì„¸ìš”.</div>
                    <div class="explanation">${selectedOption.explanation}</div>
                `;
            }
            
            // ëª¨ë“  ë²ˆì—­ ìë™ìœ¼ë¡œ ë³´ì—¬ì£¼ê¸°
            const allTranslations = document.querySelectorAll('.option-translation');
            allTranslations.forEach((el, i) => {
                el.classList.add('show');
                document.querySelector(`#toggle-${i}`).textContent = 'ìˆ¨ê¸°ê¸°';
                optionTranslations[i] = true;
            });
            
            if (!showingTranslation) {
                toggleTranslation();
            }
        }
        
        function showPractice(index) {
            const practice = practices[index];
            document.getElementById('prompt').textContent = practice.prompt;
            document.getElementById('main-translation').textContent = '';
            
            // ë²ˆì—­ ë²„íŠ¼ ì´ˆê¸°í™”
            showingTranslation = false;
            document.querySelector('.translation-btn').textContent = 'ğŸ” ëœ» ë³´ê¸°';
            
            // ì˜µì…˜ ë²ˆì—­ ìƒíƒœ ì´ˆê¸°í™”
            optionTranslations = {};
            hasAnswered = false;
            
            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = practice.options.map((opt, i) => 
                `<button class="option-btn" onclick="selectOption(${i})">
                    <div class="option-text">
                        <div>${opt.text}</div>
                        <div class="option-translation" id="translation-${i}">${opt.translation}</div>
                    </div>
                    <span class="option-translation-toggle" id="toggle-${i}" onclick="event.stopPropagation(); toggleOptionTranslation(${i})">ëœ»</span>
                </button>`
            ).join('');
            
            document.getElementById('feedback').classList.remove('show');
            document.getElementById('feedback').className = 'feedback';
            
            // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            updateNavigationButtons();
        }
        
        function navigatePractice(direction) {
            const newIndex = currentIndex + direction;
            
            if (newIndex >= 0 && newIndex < practices.length) {
                currentIndex = newIndex;
                showPractice(currentIndex);
                updateProgress();
            }
        }
        
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            
            prevBtn.disabled = currentIndex === 0;
            nextBtn.disabled = currentIndex === practices.length - 1;
        }
        
        function showVerbPractice(index) {
            const practice = verbPractices[index];
            document.getElementById('verb-infinitive').textContent = practice.infinitive;
            document.getElementById('verb-meaning').textContent = practice.meaning;
            document.getElementById('tense-name').textContent = practice.tenseName;
            
            verbChecked = false;
            document.getElementById('check-btn').textContent = 'í™•ì¸í•˜ê¸°';
            document.getElementById('check-btn').disabled = false;
            
            const gridDiv = document.getElementById('conjugation-grid');
            gridDiv.innerHTML = Object.keys(practice.conjugations).map(subject => 
                `<div class="conjugation-item">
                    <div class="subject">${subject}</div>
                    <input type="text" class="conjugation-input" id="input-${subject}" 
                           placeholder="?" data-answer="${practice.conjugations[subject]}">
                </div>`
            ).join('');
            
            // ì—”í„°í‚¤ë¡œ ë‹¤ìŒ ì…ë ¥ì¹¸ìœ¼ë¡œ ì´ë™
            const inputs = gridDiv.querySelectorAll('input');
            inputs.forEach((input, i) => {
                input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        if (i < inputs.length - 1) {
                            inputs[i + 1].focus();
                        } else {
                            checkConjugations();
                        }
                    }
                });
            });
            
            // ì²« ë²ˆì§¸ ì…ë ¥ì¹¸ì— í¬ì»¤ìŠ¤
            inputs[0]?.focus();
            
            // ë™ì‚¬ ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ì—…ë°ì´íŠ¸
            updateVerbNavigationButtons();
        }
        
        function checkConjugations() {
            if (verbChecked) return;
            
            const inputs = document.querySelectorAll('.conjugation-input');
            let allCorrect = true;
            
            inputs.forEach(input => {
                const userAnswer = input.value.trim().toLowerCase();
                const correctAnswer = input.getAttribute('data-answer').toLowerCase();
                
                if (userAnswer === correctAnswer) {
                    input.classList.add('correct');
                    input.classList.remove('incorrect');
                } else {
                    input.classList.add('incorrect');
                    input.classList.remove('correct');
                    allCorrect = false;
                    // ì •ë‹µ í‘œì‹œ
                    input.value = input.value + ' â†’ ' + correctAnswer;
                }
            });
            
            verbChecked = true;
            document.getElementById('check-btn').textContent = allCorrect ? 'ì™„ë²½í•´ìš”! ğŸ‰' : 'ë‹¤ì‹œ ì—°ìŠµí•´ë³´ì„¸ìš”';
            document.getElementById('check-btn').disabled = true;
        }
        
        function navigateVerb(direction) {
            const newIndex = currentVerbIndex + direction;
            
            if (newIndex >= 0 && newIndex < verbPractices.length) {
                currentVerbIndex = newIndex;
                showVerbPractice(currentVerbIndex);
                updateProgress();
            }
        }
        
        function updateVerbNavigationButtons() {
            const prevBtn = document.getElementById('verb-prev-btn');
            const nextBtn = document.getElementById('verb-next-btn');
            
            prevBtn.disabled = currentVerbIndex === 0;
            nextBtn.disabled = currentVerbIndex === verbPractices.length - 1;
        }
        
        function showCompletion() {
            const card = document.querySelector('.practice-card');
            card.innerHTML = `
                <div style="text-align: center; padding: 2rem;">
                    <h2 style="font-size: 2rem; margin-bottom: 1rem;">ğŸ‰</h2>
                    <h3 style="margin-bottom: 1rem;">Â¡Felicidades!</h3>
                    <p>ì˜¤ëŠ˜ì˜ í•™ìŠµì„ ì™„ë£Œí–ˆì–´ìš”!</p>
                    <p style="margin-top: 1rem; color: #666;">ë‚´ì¼ ë˜ ë§Œë‚˜ìš” ğŸ‘‹</p>
                    <button onclick="location.reload()" style="margin-top: 2rem; padding: 0.5rem 2rem; background: #3b82f6; color: white; border: none; border-radius: 5px; cursor: pointer;">
                        ë‹¤ì‹œ ì—°ìŠµí•˜ê¸°
                    </button>
                </div>
            `;
        }
        
        // ì‹œì‘
        updateProgress();
        if (currentMode === 'conversation') {
            showPractice(0);
        }
    </script>
</body>
</html>
